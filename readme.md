# lqip-modern

> Modern approach to Low Quality Image Placeholders (LQIP) using `webp` and `sharp`.

[![NPM](https://img.shields.io/npm/v/lqip-modern.svg)](https://www.npmjs.com/package/lqip-modern) [![Build Status](https://travis-ci.com/transitive-bullshit/lqip-modern.svg?branch=master)](https://travis-ci.com/transitive-bullshit/lqip-modern) [![JavaScript Style Guide](https://img.shields.io/badge/code_style-standard-brightgreen.svg)](https://standardjs.com)

## Install

```bash
npm install --save lqip-modern
## or
yarn add lqip-modern
```

## Usage

```js
const lqip = require('lqip-modern')
const result = await lqip('./fixtures/brooklyn.jpg')
```

The output would be:

```js
{
  content: <Buffer>,
  metadata: {
    originalWidth: 1400,
    originalHeight: 350,
    width: 1400,
    height: 350,
    type: 'webp',
    dataURIBase64: 'data:image/webp;base64,UklGRhIBAABXRUJQVlA4IAYBAADQBQCdASo8AA8APy18uFOup6WisAwB0CWJbACdMr9v/2P/aAcktLTW2FS031/Zg0AgyTdqdt+0AOU2hloGrW+F00NdaSnnTwx3AmJNLU8WsKf0E0qFoph3B5SIPdY1yjcpnDA0KVnL3O9iM/PByunAvd5Q5hOzDZylh3ZJB5se2muUQShndTJaNleAGb9MMYyiJxA2yRyWQrvGaMuGnkyAyUAYRFCSCtCl4FQGDtOSR28ibmMHNaF+4p98K8OkMFDZMQBGWxYL70xIoJ7OVE+uh2PSKZEcbiMAe74Tcj3KqnkRrtSZBg/8MexX/29vc/XzaNnSXPQx3xmyo4m/NGTfPcL+sAAA'
  }
}
```

You may pass an array of input images and the result will be an array of outputs.

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### [lqipModern](https://git@github.com/:transitive-bullshit/get-apex-domain-name/blob/c61c7a0104565966a657adad525491647970fd1d/index.js#L16-L26)

- `input` **([Buffer](https://nodejs.org/api/buffer.html) \| [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Buffer](https://nodejs.org/api/buffer.html)> | [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>)** Either an array of image inputs or a single image input. Each image input may either be a `Buffer` containing raw image data, or a `string` containing the filesystem path to a supported image type.
- `opts` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** Optional configuration options.
  - `opts.concurrency` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Concurrency when processing an array of input images. (optional, default `4`)
  - `opts.outputFormat` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Output format to use; either `webp` or `jpeg` (passing `jpg` is the same as passing `jpeg`). (optional, default `'webp'`)
  - `opts.outputOptions` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** Output options passed to either `sharp.webp` or `sharp.jpeg` dependent on `opts.outputFormat`.
  - `opts.resize` **([number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number) \| [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;any>)?** Options to pass to `sharp.resize`. Defaults to resizing inputs to a max dimension of `60`, with the other dimension being calculated to maintain aspect ratio. If you want more control, you can pass an array of args here which will be forwarded to `sharp.resize`.

## Related

- [lqip](https://github.com/zouhir/lqip) - Original Low Quality Image Placeholders (LQIP) module.
- [sqip](https://github.com/axe312ger/sqip) - Really solid SVG-based LQIP alternative.
  - See their comprehensive [comparison](https://axe312ger.github.io/sqip/) of LQIP techniques.
  - The biggest disadvantage of this approach is that it's ~10-100x slower to compute these images.

## License

MIT Â© [Travis Fischer](https://github.com/transitive-bullshit)

Support my OSS work by <a href="https://twitter.com/transitive_bs">following me on twitter <img src="https://storage.googleapis.com/saasify-assets/twitter-logo.svg" alt="twitter" height="24px" align="center"></a>
